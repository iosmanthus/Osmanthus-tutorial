# Chapter 1 -- 搭建基本的开发环境

首先, 我们还是选择在`Linux`下来进行我们内核的开发, 本章主要是帮助读者将基本的内核开发环境搭建起来.

我们将内核开发循环分为五个步骤:

1. 编辑

   编辑器的选择看个人, 怎么顺手怎么来. 我在本地使用是`emacs`

2. 编译 && 汇编

   这里我们需要要`GCC >= 4.7.1` , 当然`Clang`也是可以的, 但是`Clang`某些编译参数可能不一样.

   汇编器为了后续的方便, 我们使用`yasm` 而不是`nasm`, `yasm`是兼容`nasm`的, 不同之处是`yasm`具有更加丰富的功能, 在后边的开发中我们可以看到`yasm`可以给我们用汇编编写的函数修改`ElF`属性

3. 链接

   这里我们就用`GNU ld`

4. 运行

   对于运行步骤, 我们需要先对链接好的内核进行打包, 通过`GRUB`提供的工具链生成一个镜像文件, 放到虚拟机中去运行. 这里我们使用`qemu-i386`, 现在大多数发行版提供的默认是`qmeu-x86_64`, 可能各位要去利用包管理器搜索一下`qemu`其他处理器架构的版本.

5. 调试

   这里只需要`GDB`就行了, 不需要其他的工具, 如果需要功能更加强大`gdb`前端, 可以上`github`搜索`gdbgui`



在我的环境下(`ArchLinux`), 我总结了一下, 我安装的包, 不同的发行版本包名可能不同, 但是基本上是有规律可循的, 用包管理搜索一下就好.

1. `yasm`
2. `gcc`
3. `gdb`
4. `grub`
5. `mtools`
6. `xorriso`
7. `qemu-arch-extra` (只要你有`qemu-system-i386`就行)
8. `git` (版本管理)

你可以把我在[Github的项目Clone](https://github.com/iosmanthus/Osmanthus)下来看看能不能编译, 如果没有问题, 那么说明环境已经搭建起来了.

如果你遇到了问题, 我建议你粗略的看看我写的`Makefile`, 里边已经说明了一切工具依赖.